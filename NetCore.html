<html>
<head>
  <title>NetCore</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600667 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="449"/>
<h1>NetCore</h1>

<div>
<span><div><div>多线程</div><h1 style="margin: 0px; padding: 0px 0px 0px 5px; font-size: 18.2px; width: 1604px; clear: both; border-bottom: 1px solid rgb(153, 153, 153); letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><a href="https://www.cnblogs.com/yunfeifei/p/3993401.html" style="font-size: 18.2px; width: 1604px; clear: both; border-bottom: 1px solid rgb(153, 153, 153); letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Verdana, Arial, Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 2em; color: rgb(255, 102, 0);">Parallel</a><span style="color: rgb(0, 0, 0); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 18.2px; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 2em;">.for</span></h1><div><br/></div><div><br/></div><div>1.项目发布</div><div>  坑：如果发现netcoreApp 版本无法找到。先使用dotnet build 任意编译一个项目查看版本</div><div><br/></div><div>cd  到项目目录 dotnet publish -c release   发布项目</div><div>提示需要安装bower  则<span style="font-size: 15px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none; color: rgb(0, 0, 0); font-family: Helvetica, &quot;Hiragino Sans GB&quot;, 微软雅黑, &quot;Microsoft YaHei UI&quot;, SimSun, SimHei, arial, sans-serif; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;">屏蔽project.json中的 scripts 可继续发布。</span></div><div><br/></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 14px; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei UI&quot;; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;">dotnet publish有许多可选项，格式如下：</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><a href="http://images2015.cnblogs.com/blog/384997/201607/384997-20160711081845107-1429749842.png" style="font-size: 14px; margin: 0px; padding: 0px; color: black; font-family: &quot;Microsoft YaHei UI&quot;; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal; text-decoration: underline;"><img src="NetCore_files/Image.png" type="image/png" data-filename="Image.png" alt="image" border="0" style="margin: 0px; padding: 0px; border: 0px; height: auto; max-width: 700px; background-image: none; display: inline;" title="image" width="625"/></a></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong style="margin: 0px; padding: 0px;"><span style="font-size: 14px; margin: 0px; padding: 0px; font-weight: bold; color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei UI&quot;; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal;">-f, --framework [FID]</span></strong></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px;"><span style="font-size: 14px; margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei UI&quot;; font-style: normal; font-weight: normal;">指定运行框架，如：netcoreapp1.0，net45，net451等，具体由“project.json”中的“framework”节点指定</span></span></div><div><br/></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><font face="Microsoft YaHei UI" style="margin: 0px; padding: 0px;"><span style="font-size: 14px; margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei UI&quot;; color: rgb(0, 0, 0); font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">-r, --runtime [RID]</span></font></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 14px; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei UI&quot;; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;">指定应用程序运行时（自宿主应用），这种方式将会把指定平台的Core CLR打包进去。</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 14px; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei UI&quot;; font-style: normal; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: normal;">格式：[os].[version]-[arch]</span></div><div style="margin: 10px auto; padding: 0px; text-indent: 0px; font-size: 14px; letter-spacing: normal; orphans: 2; text-align: left; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 14px; margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei UI&quot;; font-style: normal; font-weight: normal;">例子：win7-x64、win7-x86、win10-x64、win10-x86、rhel.7.0-x64、ubuntu.14.04-x64、osx.10.10-x64等</span></div><div><span style="font-size: 14px; margin: 0px; padding: 0px;"><br/></span></div><div><span style="font-size: 14px; margin: 0px; padding: 0px;"><br/></span></div></div></div><div><span style="color: rgb(227, 0, 0); font-weight: bold;">泛型约束</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">where</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">T:</span> <span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">struct</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">类型参数必须是值类型。可以指定除 Nullable 以外的任何值类型。有关更多信息，请参见使用可以为</span> <span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">null</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">的类型（C# 编程指南）。</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">where</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">T :</span> <span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">class</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">类型参数必须是引用类型；这一点也适用于任何类、接口、委托或数组类型。</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">where</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">T：</span><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">new</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">()</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">类型参数必须具有无参数的公共构造函数。当与其他约束一起使用时，</span><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">new</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">() 约束必须最后指定。</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">where</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">T：&lt;基类名&gt;</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">类型参数必须是指定的基类或派生自指定的基类。</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">where</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">T：&lt;接口名称&gt;</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">类型参数必须是指定的接口或实现指定的接口。可以指定多个接口约束。约束接口也可以是泛型的。</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">where</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">T：U</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">为 T 提供的类型参数必须是为 U 提供的参数或派生自为 U 提供的参数。</span></div><div style="color:rgb(0, 0, 0);font-family:&quot;Courier New&quot;;font-size:12px;font-variant-caps:normal;font-variant-ligatures:normal;letter-spacing:normal;orphans:2;white-space:pre-wrap;widows:2;word-spacing:0px;"></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px !important;"><span style="font-size: 12px; color: rgb(227, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold; line-height: 1.8;">多约束</span></span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">class</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">EmployeeList&lt;T&gt;</span> <span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">where</span> <span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">T : Employee, IEmployee, System.IComparable&lt;T&gt;,</span> <span style="font-size: 12px; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">new</span><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">()</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">{</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">//</span> <span style="font-size: 12px; color: rgb(0, 128, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal; line-height: 1.8;">...</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">}</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;"><br/></span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;"><br/></span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">异步方法改造</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;">public class Test</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;">{</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">  public static int Getint(a, b)</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">  {</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">    </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">return a + b;</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px; color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;; font-variant-caps: normal; font-variant-ligatures: normal;">  }</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;">    public async Task&lt;int&gt; GetAsync()</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;">    {</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;">        var result = await Task.Run( () =&gt; Getint( 3, 2 ) ); // 创建任务</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;">        </span><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;">return result;</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size:12px;"><span style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;">    }</span></span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;">}</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;"><br/></span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px; color: rgb(255, 70, 53); font-weight: bold;">从basecontroller 中校验是否登录</span></div><div><span style="font-size: 9pt;">        /// &lt;summary&gt;</span></div><div><span style="font-size: 9pt;">        /// 请求过滤处理</span></div><div><span style="font-size: 9pt;">        /// &lt;/summary&gt;</span></div><div><span style="font-size: 9pt;">        /// &lt;param name=&quot;filterContext&quot;&gt;&lt;/param&gt;</span></div><div><span style="font-size: 9pt;">        public override void OnActionExecuting(ActionExecutingContext filterContext)</span></div><div><span style="font-size: 9pt;">        {</span></div><div><span style="font-size: 9pt;">            byte[] result;</span></div><div><span style="font-size: 9pt;">            filterContext.HttpContext.Session.TryGetValue(&quot;User&quot;, out result);</span></div><div><span style="font-size: 9pt;">            if (result == null)</span></div><div><span style="font-size: 9pt;">            {</span></div><div><span style="font-size: 9pt;">                filterContext.Result = new RedirectResult(&quot;/Login/SignIn&quot;);</span></div><div><span style="font-size: 9pt;">                return;</span></div><div><span style="font-size: 9pt;">            }</span></div><div><span style="font-size: 9pt;">            base.OnActionExecuting(filterContext);</span></div><div><span style="font-size: 9pt;"><br/></span></div><div><span style="font-size: 12px;"><span style="font-size: 12px; color: rgb(255, 70, 53); font-weight: bold;">从filter 中获取Action的自定义属性</span></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">public</span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">class</span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(43, 145, 175); font-family: NSimSun;">AuthoradFilter</span><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">: ActionFilterAttribute</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">{</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">    public</span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">override</span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">void</span> <span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">OnActionExecuting(ActionExecutingContext context)</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">    {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">       </span><span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">var</span> <span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">controllerActionDescriptor = context.ActionDescriptor</span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">as</span> <span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">ControllerActionDescriptor;</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">       </span><span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">var</span> <span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">s = controllerActionDescriptor.MethodInfo.GetCustomAttributes(inherit:</span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">true</span><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">)</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">            .Any(a =&gt; a.GetType().Equals(</span><span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">typeof</span><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">(AllowAnonymousAttribute)));</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">       </span><span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 0, 255); font-family: NSimSun;">base</span><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">.OnActionExecuting(context);</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">    }</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: NSimSun;">}</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;"><br/></span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;"><br/></span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="font-size: 12px;"><br/></span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 128, 0); font-family: Consolas;">            //app.UseStaticFiles(   // 静态文件路径设置   </span><span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 128, 0); font-family: Consolas;">UseStaticFiles 无参数时  标识默认到wwwroot 路径</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: Consolas;">           </span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 128, 0); font-family: Consolas;">//        new StaticFileOptions() {</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: Consolas;">           </span> <span style="font-size: 9.5pt; min-height: 11pt; color: rgb(0, 128, 0); font-family: Consolas;">//            FileProvider = new PhysicalFileProvider(</span><a href="http://path.combine%28env.contentrootpath/" style="font-size: 9.5pt; font-family: Consolas;">Path.Combine(env.ContentRootPath</a><span style="font-size: 9.5pt; min-height: 11pt; color: rgb(0, 128, 0); font-family: Consolas;">, @&quot;wwwroot&quot;)),</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: Consolas;">           </span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 128, 0); font-family: Consolas;">//            RequestPath = new PathString(&quot;/service/img&quot;)</span></div><div style="min-height: 11pt; text-align: left;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: Consolas;">           </span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 128, 0); font-family: Consolas;">//        }</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="min-height: 11pt; font-size: 9.5pt; font-family: Consolas;">           </span> <span style="min-height: 11pt; font-size: 9.5pt; color: rgb(0, 128, 0); font-family: Consolas;">//    );</span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="min-height: 11pt; font-size: 9.5pt;"><br/></span></div><div style="font-size: 12px; letter-spacing: normal; orphans: 2; white-space: pre-wrap; widows: 2; word-spacing: 0px;"><span style="min-height: 11pt; font-size: 9.5pt;"><br/></span></div></div></span>
</div></body></html> 